"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5887],{4965:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>d,default:()=>p,frontMatter:()=>o,metadata:()=>i,toc:()=>h});const i=JSON.parse('{"id":"TechnicalDocs/SDK-intro/buddie-extras/vad","title":"Speaker Detection Module","description":"The Buddie earphones have a built-in gyroscope sensor that implements voice activity detection by analyzing z-axis vibration data.","source":"@site/docs/TechnicalDocs/SDK-intro/buddie-extras/vad.mdx","sourceDirName":"TechnicalDocs/SDK-intro/buddie-extras","slug":"/TechnicalDocs/SDK-intro/buddie-extras/vad","permalink":"/open-source-web/docs/TechnicalDocs/SDK-intro/buddie-extras/vad","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/TechnicalDocs/SDK-intro/buddie-extras/vad.mdx","tags":[],"version":"current","frontMatter":{},"sidebar":"TechnicalDocsSidebar","previous":{"title":"New Module Description and SDK Brief Introduction","permalink":"/open-source-web/docs/TechnicalDocs/SDK-intro/buddie-extras/intro"},"next":{"title":"Audio Compression Module (PCA, OPUS)","permalink":"/open-source-web/docs/TechnicalDocs/SDK-intro/buddie-extras/audio-compress"}}');var s=n(4848),r=n(8453);const a=n.p+"assets/images/vad_init-08520e1f59a828a30d9bbfff5aa153fe.png",c=n.p+"assets/images/vad_task-0ff4046b9ee62791f50039a0227bc993.png",o={},d="Speaker Detection Module",l={},h=[{value:"1 Entry Function and Task List",id:"1-entry-function-and-task-list",level:2},{value:"2 vad_task()",id:"2-vad_task",level:2}];function x(e){const t={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"speaker-detection-module",children:"Speaker Detection Module"})}),"\n",(0,s.jsx)(t.p,{children:"The Buddie earphones have a built-in gyroscope sensor that implements voice activity detection by analyzing z-axis vibration data."}),"\n",(0,s.jsx)(t.p,{children:"File locations:"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.code,{children:"lis2de12.c"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.code,{children:"lis2de12.h"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.code,{children:"lis2de12_driver.c"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.code,{children:"lis2de12_driver.h"})}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"Below we will briefly introduce this module according to the order of earphone operation"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{style:{textAlign:"center"},children:"Function Entry"}),(0,s.jsx)(t.th,{style:{textAlign:"center"},children:"Function Description"}),(0,s.jsx)(t.th,{style:{textAlign:"center"},children:"File Location"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"bone_task_init()"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"SPI peripheral initialization, and register vad_task and callback function"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"apps\\earphone\\app_main.c"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"bone_task_timer_cb()"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"Read sensor data"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"apps\\common\\device\\gSensor\\lis2de12.c"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"vad_task()"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"Execute trigger task"}),(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"apps\\common\\device\\gSensor\\lis2de12.c"})]})]})]}),"\n",(0,s.jsx)(t.h2,{id:"1-entry-function-and-task-list",children:"1 Entry Function and Task List"}),"\n",(0,s.jsxs)(t.p,{children:["File location: ",(0,s.jsx)(t.code,{children:"apps\\earphone\\app_main.c -> app_main() -> bone_task_init()"}),"\r\nThis function will execute the following steps:"]}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsx)(t.li,{children:"Register SPI peripheral and start the sensor peripheral."}),"\n",(0,s.jsxs)(t.li,{children:["Create ",(0,s.jsx)(t.code,{children:'"vad_task"'})," task. (Note: the vad_task needs to be manually registered in task_info task_info_table[] before compilation)"]}),"\n",(0,s.jsx)(t.li,{children:"Add timer task and callback function to collect z-axis data"}),"\n"]}),"\n",(0,s.jsx)("img",{src:a,alt:"firmware",width:"100%",style:{display:"block",margin:"0 auto"}}),"\n",(0,s.jsx)(t.h2,{id:"2-vad_task",children:"2 vad_task()"}),"\n",(0,s.jsxs)(t.p,{children:["File location: ",(0,s.jsx)(t.code,{children:"apps\\common\\device\\gSensor\\lis2de12.c"}),"\r\nThis function will execute the following steps:"]}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsx)(t.li,{children:"Perform FFT operation on the phone's z-axis data to obtain frequency domain data"}),"\n",(0,s.jsx)(t.li,{children:"Analyze the frequency domain data to obtain voice trigger threshold"}),"\n"]}),"\n",(0,s.jsx)("img",{src:c,alt:"firmware",width:"100%",style:{display:"block",margin:"0 auto"}})]})}function p(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(x,{...e})}):x(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>c});var i=n(6540);const s={},r=i.createContext(s);function a(e){const t=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(r.Provider,{value:t},e.children)}}}]);